set follow-fork-mode child
set follow-fork-mode parent

info inferior

set detach-on-fork off

内存access 不了
set disable-randomization off


ulimit -c unlimited   设置core文件大小，要生成core文件必须设置大小，默认是0  不生成


### 生成coredump

1、
vim /etc/security/limits.conf
# 在文件末尾添加：
*               soft    core            unlimited
root            soft    core            unlimited
2、
vim /etc/sysctl.conf
# 添加内容
kernel.core_pattern = /var/crash/core.%e.%p.%t
kernel.core_uses_pid = 0
3、
sysctl -p
4、禁用Apport
sudo systemctl stop apport.service
sudo systemctl disable apport.service

5、对于指定用户
echo "ulimit -c unlimited" >> /home/apps/.bashrc
su - apps
source ~/.bashrc
 验证
 ulimit -c
6、服务托管的应用还需要修改
[Service]
LimitCORE=infinity

sudo systemctl daemon-reload
sudo systemctl restart your-service

生成火焰图
perf record -F 99 -g -p 144937 -- sleep 30
perf script > perf.out
/data/code/FlameGraph/stackcollapse-perf.pl ./perf.out > perf.folded
/data/code/FlameGraph/flamegraph.pl ./perf.folded > flamegraph.svg

# 使用 perf 监控缓存一致性开销
perf stat -e cache-misses,cache-references ./program
# 监控总线流量
perf stat -e bus-cycles,LLC-load-misses ./program

客户端端口使用范围
cat /proc/sys/net/ipv4/ip_local_port_range

查看网络流量内容
sudo ngrep -d any -W byline '.*' 'port 8021'

批量结束进程
for i in $(pidof gwrcv);do kill -9 $i;done


nohup /data/code/tgg_gateway/adapter/micro_thread/tgg/gwrcv > /dev/null 2>&1 &

nohup /data/code/tgg_gateway/adapter/micro_thread/tgg/gwrcv > /var/log/tgg_gateway/gateway.log 2>&1 &


git remote set-url origin https://github.com/hei1046035362/abcdef-hepeng.git
git remote set-url origin https://git.teamgaga.com/teamgaga/server/tgg_gateway


lnav  日志查看

        搜索深度              排除某个文件                     时间之前的  执行命令
find . -maxdepth 1 -type f ! -name "important.txt" ! -newermt "Oct 02" -ls
find . -maxdepth 1 -type f ! -name "important.txt" ! -newermt "Oct 02" -delete